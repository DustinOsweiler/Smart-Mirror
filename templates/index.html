<!--DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Mirror</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Magic Mirror</h1>
  <script src="Main.ts"></script>
</body>
</html-->

<DOCTYPE html>
  <html lang="en">
    <head>
      <title>Magic Mirror</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
      <!--link rel="stylesheet" href="styles.css"-->
      <link href="https://fonts.googleapis.com/css2?family=Oswald" rel="stylesheet">
      <style>
        body {
          font-family: 'Oswald', sans-serif;
        }
      </style>
      <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
      <script type=text/javascript>
        function halfsecond() {
          window.setInterval(function halfsecond() {
            loadnewTime(),
            loadnewDate(),
            loadTrain(),
            loadBudget()
          }, 500) //Half second

          window.setInterval(function halfsecond() {
            loadSoccer()
          }, 3600000) //Hourly

          window.setInterval(function halfsecond() {
            loadBible()
          }, 86400000) //Daily

          window.setInterval(function halfsecond() {
            loadweather()
          }, 60000) //Every Minute

          //window.setInterval(function halfsecond(){
          //  loadNews()
          //}, 8640000) 2.4 hours

          window.setInterval(function halfsecond() {
            loadFitBit()
          }, 30000) //Every 30 seconds

          function loadweather() {
            $.ajax({
              url: "/weather",
              type: 'POST',
              datatype: "json",
              success: function (data) {
                $(weather).replaceWith(data)
              }
            });
          }

          //function loadNews() {
          //  $.ajax({
          //    url: "/news",
          //    type: 'POST',
          //    datatype: "json",
          //    success: function (data) {
          //      $(News).replaceWith(data)
          //    }
          //  });
          //}

          function loadFitBit() {
            $.ajax({
              url: "/fitbit",
              type: 'POST',
              datatype: "json",
              success: function (data) {
                $(FitBit).replaceWith(data)
              }
            });
          }

          function loadBudget() {
            $.ajax({
              url: "/budget",
              type: 'POST',
              datatype: "json",
              success: function (data) {
                $(Budget).replaceWith(data)
              }
            });
          }

          function loadBible() {
            $.ajax({
              url: "/verse",
              type: 'POST',
              datatype: "json",
              success: function (data) {
                $(bible).replaceWith(data)
              }
            });
          }

          function loadSoccer() {
            $.ajax({
              url: "/soccer",
              type: 'POST',
              datatype: "json",
              success: function (data) {
                $(Soccer).replaceWith(data)
              }
            });
          }

          function loadnewTime() {
            $.ajax({
              url: "/time",
              type: 'POST',
              datatype: "json",
              success: function (data) {
                $(time).replaceWith(data)
              }
            });
          }
          function loadnewDate() {
            $.ajax({
              url: "/date",
              type: 'POST',
              datatype: "json",
              success: function (data) {
                $(date).replaceWith(data)
              }
            });
          }
          function loadTrain() {
            $.ajax({
              url: "/train",
              type: 'POST',
              datatype: "json",
              success: function (data) {
                $(Train).replaceWith(data)
              }
            });
          }
        };
      </script>
    </head>
    <body onload = halfsecond()>
      <div class="container-fluid bg-black">
        <div class="row h-25 bg-dark">
          <div class="col bg-dark text-white h5 text-start align-top">
            <div id="weather">
              <br>
               &emsp;&emsp;<img src="{{ weatherURL }}" > {{ weatherTemp }} &#176F <br>
      &emsp;&emsp;&emsp;&emsp;{{ weatherLoc }} 
      </div>
      </div>
    <div class="col bg-dark text-white h5 text-center align-top">
      <br>
      <div id="time">{{ time }}</div>
      <div id="date">{{ date }}</div>
      </div>
    <div class="col bg-dark text-white h5 text-end align-top">
      <div id="News">
        <br>
        {{ News }} 
        </div>
      </div>
  </div>
</div>

<div class="container-fluid bg-dark">
  <div class="row h-50 bg-dark">
    <div class="col bg-dark text-white h5 text-start align-middle">
      <div id="Soccer">
          &nbsp;&nbsp;&emsp;Home&emsp;&emsp;&emsp;&emsp;&emsp;&nbsp;&nbsp;Away <br>
          <br>
      <img src="{{ homeUrl }}" >{{ homeScore }}&nbsp;&nbsp;-&nbsp;&nbsp;{{awayScore}}<img src='{{awayUrl}}'> <br>
      <br>
        &nbsp;&nbsp;&emsp;&emsp;&emsp; {{ gameDate }} 
        </div>
      </div>
    <!--div class="col bg-dark text-grey h5 text-center align-middle">_</div-->
    <div class="col bg-dark text-white h5 text-end align-middle">
      <div id="Budget">
      {{ spent }}/{{budget}} <br>
      {{ output }} <br>
      {{ left }} <br>
        </div>
      </div>
    </div>
  </div>
</div>

<!--div class="container-fluid bg-dark">
  <div class="row bg-dark">
    <div class="col p-5 my-5 bg-dark text-dark h5 text-start align-middle">_</div>
    <div class="col p-5 my-5 bg-dark text-dark h5 text-center align-middle">_</div>
    <div class="col p-5 my-5 bg-dark text-dark h5 text-end align-middle">_</div>
  </div>
</div!-->

<div class="container-fluid bg-dark">
  <div class="row h-25 bg-dark">
    <div class="col bg-dark text-white h5 text-start">
      <div id="Train">
      <p style="padding: 10px; border: 2px solid {{color}}; background-color: {{color}}; width: 275px; height: 75px;">
        &nbsp;&nbsp;&emsp;&emsp;&emsp;&emsp;{{ station }} <br>
      &emsp;&emsp;&emsp;&emsp;{{ minutes }} </p>
      </div>
    </div>
    <div class="col bg-dark text-white h5 text-center">
      <div id="bible">{{ verse }} {{ text }}</div>
    </div>
    <div class="col bg-dark text-white h5 text-end">
      <div id="FitBit">
      <!--pre> <img src = "{{icon}}" -->
      {{name}} <br>
      Avg Steps:&nbsp;{{ dailySteps }} <br>
      Goals: <br>
      Active Mins: {{activeGoal}} mins <br>
      Steps: {{stepGoal}} <br>
      </div>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>
